import{bl as $,bm as H,bn as N,bk as T,aS as x,aK as C,o,c as d,b as a,w as e,a as l,aJ as z,aE as E,V as F,at as U,aD as w,av as f,au as b,ah as _,ap as V,d as g,ai as u,as as S,az as D,aA as i,bj as j,ak as k,aB as J}from"./index-99c8948f.js";import{V as v}from"./VSheet-80ab6853.js";import{V as B}from"./VBadge-1128c67d.js";import{f as K}from"./index-f8ad1ec0.js";const R=$({id:"chat",state:()=>({chats:[],chatContent:1}),getters:{},actions:{async fetchChats(){try{const s=await H.get("/api/data/chat/ChatData");this.chats=s.data}catch(s){alert(s),console.log(s)}},SelectChat(s){this.chatContent=s},sendMsg(s,n){const h={id:s,msg:n,type:"text",attachments:[],createdAt:N(new Date,{seconds:1}),senderId:s};this.chats=this.chats.filter(r=>r.id===s?{...r,...r.chatHistory.push(h)}:r)}}});const q={class:"px-6 pt-3"},G=g("Recent Chats "),O=["src"],Q=l("small",{class:"textPrimary text-subtitle-2"},"Sent a Photo",-1),W={key:1,class:"text-subtitle-2 textPrimary mt-1 text-truncate w-100"},X={class:"d-flex flex-column text-right w-25"},Y={class:"textPrimary text-subtitle-2"},Z={setup(s){const n=R();T(()=>{n.fetchChats()});const r=x(()=>n.chats),m=C(""),L=x(()=>r.value.filter(c=>c.name.toLowerCase().includes(m.value.toLowerCase()))),M=c=>j.last(c.chatHistory).createdAt,P=C([{title:"Sort by time"},{title:"Sort by Unread"},{title:"Mark all as read"}]);return(c,y)=>{const A=k("ChevronDownIcon"),I=k("perfect-scrollbar");return o(),d(f,null,[a(v,null,{default:e(()=>[l("div",q,[a(z,{variant:"outlined",modelValue:m.value,"onUpdate:modelValue":y[0]||(y[0]=t=>m.value=t),"append-inner-icon":"mdi-magnify",placeholder:"Search Contact","hide-details":"",density:"compact"},null,8,["modelValue"]),a(E,null,{activator:e(({props:t})=>[a(F,U({color:"white",variant:"flat",class:"mt-4 text-medium-emphasis"},t),{default:e(()=>[G,a(A,{size:"18",class:"ml-2"})]),_:2},1040)]),default:e(()=>[a(w,{class:"elevation-10"},{default:e(()=>[(o(!0),d(f,null,b(P.value,(t,p)=>(o(),_(S,{key:p,value:p},{default:e(()=>[a(V,null,{default:e(()=>[g(u(t.title),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1}),a(I,{class:"lgScroll"},{default:e(()=>[a(w,null,{default:e(()=>[(o(!0),d(f,null,b(i(L),t=>(o(),_(S,{value:t.id,color:"primary",class:"text-no-wrap chatItem",key:t.id,lines:"two",active:i(n).chatContent===t.id,onClick:p=>i(n).SelectChat(t.id)},{prepend:e(()=>[a(D,null,{default:e(()=>[l("img",{src:t.thumb,alt:"pro",width:"50"},null,8,O)]),_:2},1024),a(B,{class:"badg-dot",dot:"",color:t.status==="away"?"warning":t.status==="busy"?"error":t.status==="online"?"success":"containerBg"},null,8,["color"])]),append:e(()=>[l("div",X,[l("small",Y,u(i(K)(new Date(M(t)),{addSuffix:!1})),1)])]),default:e(()=>[a(V,{class:"text-subtitle-1 textPrimary w-100 font-weight-semibold"},{default:e(()=>[g(u(t.name),1)]),_:2},1024),t.chatHistory.slice(-1)[0].type=="img"?(o(),_(v,{key:0},{default:e(()=>[Q]),_:1})):(o(),d("div",W,u(t.chatHistory.slice(-1)[0].msg),1))]),_:2},1032,["value","active","onClick"]))),128))]),_:1})]),_:1})],64)}}},it=Z;const tt={class:"d-flex gap-2 align-center pa-6"},et=["src"],at=l("div",null,[l("h5",{class:"text-subtitle-1 font-weight-semibold"},"Mathew Anderson"),l("h6",{class:"text-subtitle-2"},"Designer")],-1),st={setup(s){return(n,h)=>(o(),_(v,null,{default:e(()=>[l("div",tt,[a(D,{size:"large"},{default:e(()=>[l("img",{src:i(J),alt:"pro",width:"54"},null,8,et)]),_:1}),a(B,{class:"badg-dotDetail",dot:"",color:"success"}),at])]),_:1}))}},ct=st;export{ct as C,it as a,R as u};
